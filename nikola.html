<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Swapnil Meshram's portfolio showcasing his work in Team Nikola Racing where he designed lithium-titanate battery pack and integrated it with Orion-BMS.">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Swapnil Meshram</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="50x50" href="images/swapnil_fav.jpg" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <noscript><link rel="stylesheet" href="assets/css/noscript.css"></noscript>

    <!-- Preload the chevron font so it’s cached early -->
    <link rel="preload"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/webfonts/fa-solid-900.woff2"
      as="font" type="font/woff2" crossorigin>

    <!-- FontAwesome for zoom icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <!-- Slick Carousel CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" />
    
<style>

/* Fade transition for overlay image swaps */
.fullscreen-image img.zoomable{
  cursor:grab;
  touch-action:none;
  transform-origin:center center;
  transition:opacity .4s ease,transform .1s ease-out;
}

/* Fade each <video> exactly like each <img> */
.fullscreen-video video{
  opacity:1;
  transition:opacity .4s ease;
}

/* ───── Slick arrows (Font-Awesome chevrons) ───── */
.slick-prev,
.slick-next{
  background:none;
  border:none!important;
  outline:0;
  box-shadow:none;
  width:50px;
  height:50px;
  cursor:pointer;
  position:absolute;
  top:50%;
  transform:translateY(-50%);
}
.slick-prev{left:-60px;}
.slick-next{right:-60px;}

.slick-prev:before,
.slick-next:before{
  font-family:"Font Awesome 5 Free";
  font-weight:900;
  font-size:48px;
  line-height:1;
  color:rgba(50,50,50,.9);
}
.slick-prev:before{content:"\f053";}
.slick-next:before{content:"\f054";}

.slick-prev:hover:before,
.slick-next:hover:before{color:#283a8b;}

@media(max-width:480px){
  .slick-prev,
  .slick-next{width:30px;height:30px;}
  .slick-prev:before,
  .slick-next:before{font-size:26px;}
  .slick-prev{left:-30px;}
  .slick-next{right:-30px;}
}

/* ---------- Mobile arrow sizing ≤ 768 px ---------- */
@media (max-width: 768px) {
  /* shrink *all* Slick arrows – base slider + overlays */
  .slick-prev,
  .slick-next {
    width: 34px;
    height: 34px;
  }
  .slick-prev:before,
  .slick-next:before {
    font-size: 30px;
  }
}

/* ---------- Overlay arrow look ---------- */
.fs-arrow {
  background: none;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  cursor: pointer;
}

.fs-arrow i {
  font-size: 2rem;
  color: #fff;
  line-height: 1;
}

/* stop Slick's :before from painting under our new buttons */
.fs-arrow:before{content:none!important;}

.fs-arrow:active i,
.fs-arrow:hover i {
  transform: scale(1.15);
}

/* ---------- Phones ≤ 480 px ---------- */
@media (max-width: 480px) {

  /* Base slider + full-screen overlays */
  .slick-prev,
  .slick-next,
  .fs-arrow {
    width: 28px;
    height: 28px;
  }

  /* Slick’s built-in pseudo-element arrows */
  .slick-prev:before,
  .slick-next:before {
    font-size: 24px;
  }

  /* Font-Awesome chevrons inside .fs-arrow */
  .fs-arrow i {
    font-size: 1.45rem; /* ≈ 23 px */
  }

  /* Optional: push arrows a bit farther out */
  .slick-prev { left: -34px; }
  .slick-next { right: -34px; }
}

/* Labels & citations */
.image-label,.video-label{
  text-align:center;
  font-size:16px;
  margin-top:5px;
  color:rgba(50,50,50);
}
.image-citation,.video-citation{
  margin-top:5px;
  font-size:12px;
  text-align:center;
}

/* Slider layout */
.slick-dots{
  position:absolute;
  bottom:10px;
  width:100%;
  text-align:center;
}
.slider{
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  position:relative;/* arrows live inside slider */
}
.slider .slide-content{
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  margin:20px 0;
}

/* Custom hollow rings for Slick dots */
.slick-dots li button{
  border:none!important;
  background:transparent!important;
  padding:0;
  outline:none;
}
.slick-dots li button:before{
  content:'';
  display:inline-block;
  width:12px;
  height:12px;
  border:2px solid rgba(50,50,50,.7);
  border-radius:50%;
  margin:0 6px;
  transition:background .2s ease,transform .2s ease;
}
.slick-dots li button:hover:before{transform:scale(1.2);}
.slick-dots li.slick-active button:before{
  background:#283a8b;
  border-color:#283a8b;
}

.video-container{position:relative;width:100%;max-width:600px;margin:0 auto;}
.slider .slide-content img,
.slider .slide-content video{
  max-width:600px;
  width:100%;
  height:auto;
  display:block;
  margin:0 auto;
  border:1px solid rgba(50,50,50);
  padding:6px;
}
@media(max-width:600px){
  .slider .slide-content img,
  .slider .slide-content video{padding:5px;}
}

/* Hover scale */
.image,.video{
  cursor:pointer;
  transition:transform .25s ease;
}
.image:hover,.video:hover{transform:scale(1.01);}

/* Fullscreen overlay */
.fullscreen-video,
.fullscreen-image{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100vh;               /* base - works everywhere */
  background:rgba(0,0,0,.8);
  z-index:9999;
  display:flex;
  justify-content:center;
  align-items:center;
  touch-action:none;
}
/* Modern browsers – use the dynamic viewport so iOS chrome collapse doesn’t jump */
@supports(height:100dvh){
  .fullscreen-video,
  .fullscreen-image{height:100dvh;}
}

.fullscreen-video video,
.fullscreen-image img{
  max-width:90%;
  max-height:90%;
}

.blurred-background{filter:blur(5px);}
.close-button{
  position:absolute;
  top:25px;
  right:25px;
  width:32px;
  height:32px;
  background:url('images/close-icon.png') no-repeat center/cover;
  cursor:pointer;
  z-index:10000;
}

/* Zoom controls */
.zoom-controls {
  position: absolute;         /* take it out of the flow */
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 0.75rem;    /* vertical / horizontal padding */
  background: rgba(0,0,0,0.6);
  border-radius: 9999px;      /* fully rounded ends */
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10001;

  /* start hidden & fade-in on hover/focus */
  opacity: 0;
  transition: opacity 0.3s ease;
  }

  .fullscreen-image:hover .zoom-controls,
  .zoom-controls:focus-within {
    opacity: 1;
}

.zoom-btn {
  background: transparent;    /* remove per-button circle */
  border: none;
  width: auto; height: auto;  /* let padding define hit area */
  padding: 0.25rem;           /* click‐area around the icon */
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #fff !important;     /* icon color */
  font-size: 1rem;            /* scale the icon up a bit */
}

.zoom-btn:hover {
  background: rgba(255,255,255,0.15);
  border-radius: 50%;
}

/* Responsive project text */
.project-text{
  font-size:1.175rem;
  line-height:1.6;
}
@media(max-width:1280px){.project-text{font-size:1.1rem;}}
@media(max-width:736px){.project-text{font-size:1rem;}}

/* Play icon */
.play-icon{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:64px;
  height:64px;
  background:url('images/play-icon.png') no-repeat center/cover;
  opacity:.8;
  cursor:pointer;
}
.play-icon:hover{transform:translate(-50%,-50%) scale(1.2);}
@media(max-width:480px){.play-icon{top:50%;}}

/* ───── Overlay arrow repositioning ───── */
.fullscreen-image .slick-prev,
.fullscreen-video .slick-prev{
  /* left:calc((100% - 90%)/2 + .5rem)!important; */
  top:50%;
  transform:translateY(-50%);
  z-index:10001;
}
.fullscreen-image .slick-next,
.fullscreen-video .slick-next{
  /* right:calc((100% - 90%)/2 + .5rem)!important; */
  top:50%;
  transform:translateY(-50%);
  z-index:10001;
}

/* Brighten chevrons for contrast */
.fullscreen-image .slick-prev:before,
.fullscreen-image .slick-next:before,
.fullscreen-video .slick-prev:before,
.fullscreen-video .slick-next:before{
  color:#fff!important;
  font-size:2rem;
  opacity:.85;
}

</style>

</head>
<body class="is-preload">

<!-- Header -->
<header id="header">
    <a href="index.html#three" class="title">From Circuit Boards to Robots: Projects in Embedded Systems & Robotics</a>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
        </ul>
    </nav>
</header>

<!-- Wrapper -->
<div id="wrapper">

    <!-- Main -->
    <section id="main" class="wrapper">
        <div class="inner">
            <h1 class="major">Team Nikola Racing</h1>
            <div class="slider">
                <div class="slide-content">
                    <a href="images/Team Nikola_1.png" class="image" onclick="showFullScreenImage('images/Team Nikola_1.png'); return false;">
                        <img src="images/Team Nikola_1.png" alt="Nikola 1.0 (Without Body Panels)" loading="lazy">
                    </a>
                    <p class="image-label">Image 1: Nikola 1.0 (Without Body Panels)</p>
                </div>
                <div class="slide-content">
                    <a href="images/Team Nikola_3.png" class="image" onclick="showFullScreenImage('images/Team Nikola_3.png'); return false;">
                        <img src="images/Team Nikola_3.png" alt="Lithium Titanate Battery Cell" loading="lazy">
                    </a>
                    <p class="image-label">Image 2: Lithium Titanate Battery Cell</p>
                </div>
                <div class="slide-content">
                    <a href="images/Team Nikola_4.png" class="image" onclick="showFullScreenImage('images/Team Nikola_4.png'); return false;">
                        <img src="images/Team Nikola_4.png" alt="Lithium Titanate Battery Pack Integration with Orion BMS" loading="lazy">
                    </a>
                    <p class="image-label">Image 3: Lithium Titanate Battery Pack Integration with Orion BMS</p>
                </div>
                <div class="slide-content">
                    <a href="images/Team Nikola_2.png" class="image" onclick="showFullScreenImage('images/Team Nikola_2.png'); return false;">
                        <img src="images/Team Nikola_2.png" alt="Lithium Titanate Battery Pack Assembly on Nikola 1.0" loading="lazy">
                    </a>
                    <p class="image-label">Image 4: Lithium Titanate Battery Pack Assembly on Nikola 1.0</p>
                </div>
                <div class="slide-content">
                    <a href="images/Team Nikola_5.png" class="image" onclick="showFullScreenImage('images/Team Nikola_5.png'); return false;">
                        <img src="images/Team Nikola_5.png" alt="Nikola 1.0 (Assembled & Tested)" loading="lazy">
                    </a>
                    <p class="image-label">Image 5: Nikola 1.0 (Assembled & Tested)</p>
                </div>
                <div class="slide-content">
                    <div class="video-container">
                        <video class="video" muted>
                            <source src="images/Team Nikola_Segway.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <div class="play-icon" onclick="playFullScreen('images/Team Nikola_Segway.mp4', true)"></div>
                    </div>
                    <p class="video-label">Video 1: Electric Segway Testing by Swapnil Meshram</p>
                </div>
            </div>
            <p class="text-justify project-text">We designed, fabricated, and manufactured an electric motorcycle with a 100-kilometer range, 20-minute charging time, and a battery lifespan of over 8 years. At the heart of our development were lithium-titanate cells, featuring a single-cell capacity of 40Ah and 2.3V. These 20 cells were connected in a series combination and equipped with the advanced Orion Battery Management System (BMS) boasting CAN communication for real-time tracking. The vehicle featured a strong 2kW BLDC motor that was seamlessly integrated with a precise chain drive system.</p>
            <p class="text-justify project-text">My significant contribution to this project, in partnership with my teammate, was the initiation and implementation of a battery pack design consisting of lithium-titanate cells. This development played a pivotal role in enabling our electric motorcycle to achieve a remarkable 20-minute charging time while ensuring a battery life exceeding 8 years. Our team was one of the first to use lithium-titanate batteries in an electric bike.</p>
            <p class="text-justify project-text">Additionally, as part of our institute's Golden Jubilee celebration, Team Nikola designed and built an electric Segway—a self-balancing vehicle guided by gyroscopic sensors, powered by two BLDC motors and LiPo batteries.</p>
        </div>
    </section>

</div>

<!-- Footer -->
<footer id="footer" class="wrapper alt">
    <div class="inner">
        <ul class="menu">
            <li>&copy; 2016-2025 Swapnil Meshram</li>
        </ul>
    </div>
</footer>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script>
/* ──────────────────────────────────────────
   1.  MAIN SLIDER
────────────────────────────────────────── */
const $slider = $('.slider');

/* hook BEFORE .slick() so init fires */
$slider.on('init setPosition afterChange', positionArrows);

$slider.slick({
  autoplay: true,
  dots: true,
  arrows: true,
  infinite: true,
  speed: 800,
  cssEase: 'cubic-bezier(0.7,0,0.3,1)',
  slidesToShow: 1,
  slidesToScroll: 1
});

const slickInst = $slider.slick('getSlick');

/* centre desktop arrows on the active image */
function positionArrows () {
  const $img = $slider.find('.slick-current img');
  if (!$img.length) return;                     /* current slide is video */

  if (!$img[0].naturalHeight) {                 /* image not loaded yet */
    $img.on('load', positionArrows);
    return;
  }
  const imgBox   = $img[0].getBoundingClientRect();
  const slideBox = $slider[0].getBoundingClientRect();
  const mid      = imgBox.top + imgBox.height / 2 - slideBox.top;
  $slider.find('.slick-prev, .slick-next').css('top', mid + 'px');
}
$(window).on('resize orientationchange', positionArrows);

/* ──────────────────────────────────────────
   2.  SHARED HELPERS FOR FULLSCREEN OVERLAYS
────────────────────────────────────────── */

/* place the overlay chevrons flush with the actual media bounds */
function positionFsArrows (ov) {
  const media = ov.querySelector('img.zoomable, video');
  if (!media) return;

  const box  = media.getBoundingClientRect();
  const prev = ov.querySelector('.slick-prev');
  const next = ov.querySelector('.slick-next');
  const gap  = 20;                                /* px from edge of media */

  prev.style.left  = Math.max(box.left - prev.offsetWidth - gap, gap) + 'px';
  next.style.right = Math.max(window.innerWidth - box.right - next.offsetWidth - gap, gap) + 'px';

  const vMid = box.top + box.height / 2 - prev.offsetHeight / 2;
  prev.style.top = next.style.top = vMid + 'px';
}

/* add / remove window-resize listener so we don’t leak it */
function addFsResizeHook (ov) {
  const fn = () => positionFsArrows(ov);
  window.addEventListener('resize', fn);
  ov._resizeHook = fn;
}
function removeFsResizeHook (ov) {
  if (ov && ov._resizeHook) window.removeEventListener('resize', ov._resizeHook);
}

/* convenience: blur page when overlay open */
function blurPage (on) {
  document.body.classList.toggle('fullscreen-mode', on);
  document.getElementById('wrapper').classList.toggle('blurred-background', on);
}

/* ──────────────────────────────────────────
   3.  FULLSCREEN VIDEO OVERLAY
────────────────────────────────────────── */
function playFullScreen (videoSrc, autoPlay = false) {
  const ov = document.createElement('div');
  ov.className = 'fullscreen-video';
  ov.innerHTML = `
    <div class="close-button" onclick="closeFullScreen()"></div>
    <button class="slick-prev fs-arrow" aria-label="Previous">
      <i class="fas fa-chevron-left"></i>
    </button>
    <button class="slick-next fs-arrow" aria-label="Next">
      <i class="fas fa-chevron-right"></i>
    </button>

    <video src="${videoSrc}" playsinline muted style="opacity:0"></video>
    <div class="play-icon" aria-hidden="true"></div>
  `;
  document.body.appendChild(ov);
  blurPage(true);

  const vid     = ov.querySelector('video');
  const playBtn = ov.querySelector('.play-icon');
  requestAnimationFrame(() => (vid.style.opacity = 1));

  addFsResizeHook(ov);
  positionFsArrows(ov);

  vid.addEventListener('play', () => {
    playBtn.style.display = 'none';
    vid.setAttribute('controls', '');
  });
  if (autoPlay) vid.play().catch(() => {});
  playBtn.addEventListener('click', () => vid.play());

  /* next / prev with cross-fade */
  function jump (dir) {
    vid.style.opacity = 0;
    vid.addEventListener('transitionend', function handle () {
      vid.removeEventListener('transitionend', handle);

      dir < 0 ? slickInst.slickPrev() : slickInst.slickNext();
      const slide = slickInst.$slides.eq(slickInst.currentSlide);
      const vSrc  = slide.find('video source').attr('src');

      if (vSrc) {                                   /* next is video */
        vid.pause();
        vid.removeAttribute('controls');
        playBtn.style.display = '';
        vid.src = vSrc;
        vid.load();
        requestAnimationFrame(() => {
          vid.style.opacity = 1;
          positionFsArrows(ov);
        });
      } else {                                      /* next is image */
        closeFullScreen();
        showFullScreenImage(slide.find('a.image').attr('href'));
      }
    });
  }
  ov.querySelector('.slick-prev').onclick = () => jump(-1);
  ov.querySelector('.slick-next').onclick = () => jump(1);

  document.addEventListener('keydown', function esc (e) {
    if (e.key === 'Escape') {
      document.removeEventListener('keydown', esc);
      closeFullScreen();
    }
  });
}

/* ──────────────────────────────────────────
   4.  FULLSCREEN IMAGE OVERLAY
────────────────────────────────────────── */
function showFullScreenImage (src, evt) {
  if (evt) evt.preventDefault();

  let idx    = slickInst.currentSlide;
  const slideEl = slickInst.$slides.eq(idx);

  /* if current slide is video, delegate */
  if (slideEl.find('video').length) {
    playFullScreen(slideEl.find('video source').attr('src'));
    return;
  }

  const ov = document.createElement('div');
  ov.className = 'fullscreen-image';
  ov.innerHTML = `
    <div class="close-button" onclick="closeFullScreen()"></div>
    <button class="slick-prev fs-arrow" aria-label="Previous">
      <i class="fas fa-chevron-left"></i>
    </button>
    <button class="slick-next fs-arrow" aria-label="Next">
      <i class="fas fa-chevron-right"></i>
    </button>
    <div class="zoom-controls">
      <button class="zoom-btn zoom-out"  aria-label="Zoom out"><i class="fas fa-minus"></i></button>
      <button class="zoom-btn zoom-reset" aria-label="Reset zoom"><i class="fas fa-search"></i></button>
      <button class="zoom-btn zoom-in"   aria-label="Zoom in"><i class="fas fa-plus"></i></button>
    </div>
    <img src="${src}" alt="" class="zoomable" loading="lazy">
  `;
  document.body.appendChild(ov);
  blurPage(true);

  const img = ov.querySelector('img.zoomable');
  let scale   = 0.85,
      offsetX = 0,
      offsetY = 0;
  img.style.transform = `translate(0,0) scale(${scale})`;

  addFsResizeHook(ov);
  img.onload = () => positionFsArrows(ov);
  positionFsArrows(ov);

  /* helper to swap slide & keep arrows aligned */
  function swapSlide () {
    const s = slickInst.$slides.eq(idx);
    const v = s.find('video source').attr('src');

    if (v) { closeFullScreen(); playFullScreen(v); return; }

    const newSrc = s.find('a.image').attr('href');
    img.style.opacity = 0;
    img.addEventListener('transitionend', function t () {
      img.removeEventListener('transitionend', t);
      img.src = newSrc;
      requestAnimationFrame(() => {
        img.style.opacity = 1;
        positionFsArrows(ov);
      });
    });
  }

  ov.querySelector('.slick-prev').onclick = () => {
    idx = (idx - 1 + slickInst.slideCount) % slickInst.slideCount;
    swapSlide();
  };
  ov.querySelector('.slick-next').onclick = () => {
    idx = (idx + 1) % slickInst.slideCount;
    swapSlide();
  };

  /* ─── zoom & pan ─── */
  function update () {
    img.style.transform =
      `translate(${offsetX}px,${offsetY}px) scale(${scale})`;
  }

  ov.querySelector('.zoom-in').onclick    = () => {
    scale = Math.min(scale * 1.2, 3); update();
  };
  ov.querySelector('.zoom-out').onclick   = () => {
    scale = Math.max(scale * 0.8, 0.5); update();
  };
  ov.querySelector('.zoom-reset').onclick = () => {
    scale = 0.85; offsetX = offsetY = 0; update();
  };

  ov.addEventListener('wheel', e => {
    e.preventDefault();
    scale *= e.deltaY < 0 ? 1.1 : 0.9;
    scale  = Math.min(Math.max(scale, 0.5), 3);
    update();
  }, { passive:false });

  /* drag-to-pan (mouse) */
  let dragging = false, sx, sy;
  img.addEventListener('mousedown', e => {
    e.preventDefault();
    dragging  = true;
    sx = e.clientX; sy = e.clientY;
    img.style.cursor = 'grabbing';
  });
  document.addEventListener('mousemove', e => {
    if (!dragging) return;
    offsetX += e.clientX - sx; offsetY += e.clientY - sy;
    sx = e.clientX; sy = e.clientY;
    update();
  });
  document.addEventListener('mouseup', () => {
    dragging = false; img.style.cursor = 'grab';
  });
  ov.addEventListener('mouseleave', () => {
    dragging = false; img.style.cursor = 'grab';
  });

  /* pinch-to-zoom (touch) */
  function dist(t1, t2) {
    return Math.hypot(t1.clientX - t2.clientX, t1.clientY - t2.clientY);
  }
  let pinchStart = null, touchDrag = false, tx, ty;
  ov.addEventListener('touchstart', e => {
    if (e.touches.length === 2) {
      pinchStart = dist(e.touches[0], e.touches[1]);
    } else if (e.touches.length === 1) {
      touchDrag = true;
      tx = e.touches[0].clientX;
      ty = e.touches[0].clientY;
    }
  }, { passive:false });
  ov.addEventListener('touchmove', e => {
    if (e.touches.length === 2 && pinchStart !== null) {
      e.preventDefault();
      scale = Math.min(Math.max(
        scale * dist(e.touches[0], e.touches[1]) / pinchStart, 0.5), 3);
      pinchStart = dist(e.touches[0], e.touches[1]);
      update();
    } else if (e.touches.length === 1 && touchDrag) {
      e.preventDefault();
      offsetX += e.touches[0].clientX - tx;
      offsetY += e.touches[0].clientY - ty;
      tx = e.touches[0].clientX;
      ty = e.touches[0].clientY;
      update();
    }
  }, { passive:false });
  ov.addEventListener('touchend', e => {
    if (e.touches.length < 2) pinchStart = null;
    if (e.touches.length === 0) touchDrag = false;
  });

  document.addEventListener('keydown', function esc (e) {
    if (e.key === 'Escape') {
      document.removeEventListener('keydown', esc);
      closeFullScreen();
    }
  });
}

/* ──────────────────────────────────────────
   5.  CLOSE OVERLAY
────────────────────────────────────────── */
function closeFullScreen () {
  const ov =
    document.querySelector('.fullscreen-image') ||
    document.querySelector('.fullscreen-video');
  if (!ov) return;
  removeFsResizeHook(ov);
  ov.remove();
  blurPage(false);
}
</script>

</body>
</html>
